"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[9635],{52694:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return x}});var a=t(87462),i=t(45987),o=(t(35776),t(3905)),r=t(91515),m=t(96497);const l=["components"],d={},p=(s="InlineAlert",function(e){return console.warn("Component "+s+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",e)});var s;const u={_frontmatter:d},c=r.Z;function x(e){let{components:n}=e,t=(0,i.Z)(e,l);return(0,o.mdx)(c,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)(m.Z,{mdxType:"BetaNote"}),(0,o.mdx)("h1",{id:"ingestion-webhook"},"Ingestion webhook"),(0,o.mdx)("p",null,"The Adobe Commerce Extensibility Starter Kit supports ingestion webhooks. They provide an alternative method to deliver events for scenarios where the calling system cannot produce a request to interact directly with the event provider. For example, if the client cannot add custom headers to the request."),(0,o.mdx)("h2",{id:"enabling-ingest-webhooks"},"Enabling ingest webhooks"),(0,o.mdx)("p",null,"To enable webhooks in the Starter Kit, uncomment the ",(0,o.mdx)("inlineCode",{parentName:"p"},"ingestion")," section in your ",(0,o.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," file:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"ingestion:\n  license: Apache-2.0\n  actions:\n    $include: ./actions/ingestion/actions.config.yaml\n")),(0,o.mdx)("h2",{id:"customizing-ingest-webhooks"},"Customizing ingest webhooks"),(0,o.mdx)("p",null,"Data parameters contain the information of the ",(0,o.mdx)("a",{parentName:"p",href:"../../events/"},"event")," to publish. Each event must include an entity, ",(0,o.mdx)("inlineCode",{parentName:"p"},"event"),", and ",(0,o.mdx)("inlineCode",{parentName:"p"},"value"),". The value parameter contains the data to send through the event."),(0,o.mdx)("p",null,"The following entities and their corresponding events are currently available:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"product"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.catalog_product_create")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.catalog_product_update")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.catalog_product_delete")))),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"customer"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.customer_create")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.customer_update")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.customer_delete")))),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"customer-group"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.customer_group_create")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.customer_group_update")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.customer_group_delete")))),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"order"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.sales_order_status_update")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.sales_order_shipment_create")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.sales_order_shipment_update")))),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"stock"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"be-observer.catalog_stock_update"))))),(0,o.mdx)(p,{variant:"tip",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"The list of entities and their corresponding ",(0,o.mdx)("inlineCode",{parentName:"p"},"backoffice")," events is available in the Starter Kit's ",(0,o.mdx)("inlineCode",{parentName:"p"},"onboarding/config/events.json")," file."),(0,o.mdx)("p",null,"The following JSON payload demonstrates a ",(0,o.mdx)("inlineCode",{parentName:"p"},"product")," entity with a ",(0,o.mdx)("inlineCode",{parentName:"p"},"create")," event:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "uid": "event_uid_1",\n    "event": "be-observer.catalog_product_create",\n    "value": {\n      "sku": "PRODUCT_SKU",\n      "name": "Product SKU",\n      "price": 1,\n      "description": "Product SKU description"\n    }\n  }\n}\n')),(0,o.mdx)("h2",{id:"authentication-and-parameters"},"Authentication and parameters"),(0,o.mdx)("p",null,"Ingest webhooks are not authenticated by default. To add authentication and enable an authentication check, modify the ",(0,o.mdx)("inlineCode",{parentName:"p"},"actions/ingestion/webhook/auth.js")," file's ",(0,o.mdx)("inlineCode",{parentName:"p"},"checkAuthentication")," function."),(0,o.mdx)("p",null,"You can access any needed environment parameter from ",(0,o.mdx)("inlineCode",{parentName:"p"},"params"),". Use the following parameters to inform your ",(0,o.mdx)("inlineCode",{parentName:"p"},".env")," authentication settings."),(0,o.mdx)("p",null,"You can provide additional ",(0,o.mdx)("inlineCode",{parentName:"p"},".env")," parameters by adding them to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"inputs")," section of the ",(0,o.mdx)("inlineCode",{parentName:"p"},"actions/ingestion/webhook/actions.config.yaml")," file:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"webhook:\n  function: ./consumer/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    OAUTH_ORG_ID: $OAUTH_ORG_ID\n    OAUTH_CLIENT_ID: $OAUTH_CLIENT_ID\n    OAUTH_CLIENT_SECRET: $OAUTH_CLIENT_SECRET\n    OAUTH_TECHNICAL_ACCOUNT_ID: $OAUTH_TECHNICAL_ACCOUNT_ID\n    OAUTH_TECHNICAL_ACCOUNT_EMAIL: $OAUTH_TECHNICAL_ACCOUNT_EMAIL\n    IO_MANAGEMENT_BASE_URL: $IO_MANAGEMENT_BASE_URL\n    IO_CONSUMER_ID: $IO_CONSUMER_ID\n    IO_PROJECT_ID: $IO_PROJECT_ID\n    IO_WORKSPACE_ID: $IO_WORKSPACE_ID\n    AIO_runtime_namespace: $AIO_runtime_namespace\n    \n    YOUR_PARAM: $YOUR_PARAM_ENV\n    \n  annotations:\n    require-adobe-auth: false\n    final: true\n")))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-app-development-starter-kit-ingestion-webhook-md-b6dd418ae220e7232ddd.js.map
"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[4521],{32999:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return l},default:function(){return x}});var o=t(87462),s=t(45987),a=(t(35776),t(3905)),r=t(91515),i=t(96497);const d=["components"],l={},m=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.mdx)("div",n)},p=m("InlineAlert"),c=m("CodeBlock"),u={_frontmatter:l},h=r.Z;function x(e){let{components:n}=e,t=(0,s.Z)(e,d);return(0,a.mdx)(h,(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)(i.Z,{mdxType:"BetaNote"}),(0,a.mdx)("h1",{id:"actions-overview"},"Actions overview"),(0,a.mdx)("p",null,"The Adobe Commerce Extensibility Starter Kit includes boilerplate code and samples for the following types of actions:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"consumer")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"event handler")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"event ingestion")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"synchronous webhook"))),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"consumer")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"event handler")," actions implement the business logic needed to synchronize data between Commerce and the external systems being integrated."),(0,a.mdx)("p",null,"Additionally, boilerplate code, responses, and samples for event ingestion and synchronous webhook actions are provided."),(0,a.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,a.mdx)("p",null,"The synchronous webhook responses for each action are configured for the ",(0,a.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/extensibility/webhooks/"},"Commerce webhook module"),". To customize the responses for other implementations, modify the ",(0,a.mdx)("inlineCode",{parentName:"p"},"responses.js")," file."),(0,a.mdx)("h2",{id:"consumer-action"},(0,a.mdx)("inlineCode",{parentName:"h2"},"consumer")," action"),(0,a.mdx)("p",null,"The main purpose of this action is to route events to the ",(0,a.mdx)("a",{parentName:"p",href:"#event-handler-action"},(0,a.mdx)("inlineCode",{parentName:"a"},"event handler")," action"),". Normally, this routing is determined by the name of the event received."),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"consumer")," action is subscribed to a set of events. In many cases, all the events originate from the same entity, such as the ",(0,a.mdx)("inlineCode",{parentName:"p"},"product"),' entity. However, there are examples where a consumer receives events from multiple entities belonging to the same "domain", such as ',(0,a.mdx)("inlineCode",{parentName:"p"},"order")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"shipment"),". When the event provider receives an event, this runtime action will be automatically activated."),(0,a.mdx)("p",null,"The response returned by a ",(0,a.mdx)("inlineCode",{parentName:"p"},"consumer")," action is expected to be consistent with the response received from the activation of the subsequent ",(0,a.mdx)("inlineCode",{parentName:"p"},"event handler")," action. For example, if the ",(0,a.mdx)("inlineCode",{parentName:"p"},"event handler")," action returns an ",(0,a.mdx)("inlineCode",{parentName:"p"},"HTTP/400")," status, the consumer action is expected to respond with the same status. This ensures that the event processing is appropriately retried based on the event handler action response."),(0,a.mdx)("p",null,"When it receives an event that it does not know how to route, it is expected to return HTTP/400 status. This will prevent the event handling from being retried."),(0,a.mdx)("p",null,"By default, ",(0,a.mdx)("inlineCode",{parentName:"p"},"consumer")," actions have the following response:"),(0,a.mdx)(c,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"success"},"Success"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#successResponse\nreturn {\n  statusCode: 200,\n  body: {\n    type: 'EVENT TYPE',\n    response: {\n      // Response returned by the event handler action\n    }\n  }\n}\n")),(0,a.mdx)("h3",{id:"failure"},"Failure"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#errorResponse\nreturn {\n  error: {\n    statusCode: 400, // 404, 500, etc,\n    body : {\n      error: 'YOUR ERROR MESSAGE'\n    }\n  }\n}\n")),(0,a.mdx)("h2",{id:"event-handler-action"},(0,a.mdx)("inlineCode",{parentName:"h2"},"event handler")," action"),(0,a.mdx)("p",null,"The main purpose of this action is to manage an event that notifies you about a change in one of the integrated systems. Typically, its business logic includes an API call to propagate the changes to the other system being integrated."),(0,a.mdx)("p",null,"The ",(0,a.mdx)("a",{parentName:"p",href:"#consumer-action"},(0,a.mdx)("inlineCode",{parentName:"a"},"consumer")," action")," synchronously activates these event handler actions to delegate the handling of an event."),(0,a.mdx)("p",null,"The response returned by an event handler action includes a ",(0,a.mdx)("inlineCode",{parentName:"p"},"statusCode")," attribute. This attribute allows the consumer action to propagate the response HTTP status code upstream to properly reflect the event registration information located on the ",(0,a.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/events/docs/support/tracing/"},"Debug Tracing")," tab in the Adobe Developer Console."),(0,a.mdx)("p",null,"By default, ",(0,a.mdx)("inlineCode",{parentName:"p"},"event handler")," actions have the following response:"),(0,a.mdx)(c,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"success-1"},"Success"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#actionSuccessResponse\nreturn {\n  statusCode: 200,\n  body: {\n    success: true,\n    message: 'YOUR SUCCESS MESSAGE'\n  }\n}\n")),(0,a.mdx)("h3",{id:"failure-1"},"Failure"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#actionErrorResponse\nreturn {\n  statusCode: 400, // 404, 500, etc\n  body: {\n    success: false,\n    error: 'YOUR ERROR MESSAGE'\n  }\n}\n")),(0,a.mdx)("h2",{id:"event-ingestion-action"},"event ingestion action"),(0,a.mdx)("p",null,"The main purpose of this runtime action is to provide an alternative method to deliver events to the integration, if the 3rd-party, back-office application cannot fulfill the ",(0,a.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/events/docs/guides/api/eventsingress_api/"},"Events Publishing API's")," requirements."),(0,a.mdx)("p",null,"For more information, see ",(0,a.mdx)("a",{parentName:"p",href:"./ingestion-webhook.md"},"Ingestion webhooks"),"."),(0,a.mdx)("p",null,"To get the URL of the webhook, run the following command:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-bash"},"aio runtime action get ingestion/webhook --url\n")),(0,a.mdx)("p",null,"By default, ",(0,a.mdx)("inlineCode",{parentName:"p"},"event ingestion")," actions have the following response:"),(0,a.mdx)(c,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"success-2"},"Success"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#successResponse\nreturn {\n  statusCode: 200,\n  body: {\n    type: 'EVENT TYPE',\n    response: {\n      success: true,\n      message: 'Event published successfully'\n    }\n  }\n}\n")),(0,a.mdx)("h3",{id:"failure-2"},"Failure"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#errorResponse\nreturn {\n  error: {\n    statusCode: 400, // 404, 500, etc,\n    body : {\n      error: 'YOUR ERROR MESSAGE'\n    }\n  }\n}\n")),(0,a.mdx)("h2",{id:"synchronous-webhook-action"},"synchronous webhook action"),(0,a.mdx)("p",null,"The contents of the ",(0,a.mdx)("inlineCode",{parentName:"p"},"./actions/webhook")," directory expose a webhook that can be invoked synchronously from Commerce to affect the behavior of a particular business flow."),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"./actions/webhook/check-stock")," folder provides a ",(0,a.mdx)("a",{parentName:"p",href:"./webhooks-example.md"},"reference implementation")," of a synchronous webhook action."),(0,a.mdx)("p",null,"To get the URL of the webhook, run the following command:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-bash"},"aio runtime action get webhook/check-stock --url\n")),(0,a.mdx)("p",null,"By default, ",(0,a.mdx)("inlineCode",{parentName:"p"},"synchronous webhook")," actions have the following response:"),(0,a.mdx)(c,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"success-3"},"Success"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#webhookSuccessResponse\nreturn {\n  statusCode: 200,\n  body: {\n    op: 'success'\n  }\n}\n")),(0,a.mdx)("h3",{id:"failure-3"},"Failure"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-js"},"// ./actions/responses.js#webhookSuccessResponse\nreturn {\n  error: {\n    statusCode: 200,\n    body : {\n      op: 'exception'\n      message: 'YOUR ERROR MESSAGE'\n    }\n  }\n}\n")))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-app-development-starter-kit-actions-overview-md-7d0b97e492ebf4cfb1f5.js.map
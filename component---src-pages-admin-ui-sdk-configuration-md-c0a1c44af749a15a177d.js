"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[5553],{23874:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return m},default:function(){return d}});var n=a(87462),i=a(63366),s=(a(15007),a(64983)),r=a(91515),o=["components"],m={},p={_frontmatter:m},c=r.Z;function d(e){var t=e.components,a=(0,i.Z)(e,o);return(0,s.mdx)(c,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"admin-configuration-and-testing"},"Admin configuration and testing"),(0,s.mdx)("p",null,"The Adobe Commerce Admin UI SDK allows you to use a local server to view and test your Admin customizations before you submit your app to the Adobe Marketplace."),(0,s.mdx)("h2",{id:"configure-the-admin"},"Configure the Admin"),(0,s.mdx)("p",null,"Navigate to ",(0,s.mdx)("strong",{parentName:"p"},"Stores")," > Settings > ",(0,s.mdx)("strong",{parentName:"p"},"Configuration")," > ",(0,s.mdx)("strong",{parentName:"p"},"Adobe Services")," > ",(0,s.mdx)("strong",{parentName:"p"},"Admin UI SDK")," and edit the ",(0,s.mdx)("strong",{parentName:"p"},"Local testing")," screen. When you enable the local service, all calls are automatically redirected to the local server, instead of connecting to Adobe's App Registry. The values you specify must match the contents of your local ",(0,s.mdx)("inlineCode",{parentName:"p"},"server.js")," file."),(0,s.mdx)("p",null,(0,s.mdx)("a",{parentName:"p",href:"#test-with-a-sample-app"},"Test with a sample app")," provides a sample ",(0,s.mdx)("inlineCode",{parentName:"p"},"server.js")," file."),(0,s.mdx)("p",null,(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"47.8125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/5530d/sdk-config.webp 320w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/0c8fb/sdk-config.webp 640w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/94b1e/sdk-config.webp 1280w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/0b34d/sdk-config.webp 1920w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/d0584/sdk-config.webp 2426w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/dd4a7/sdk-config.png 320w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/0f09e/sdk-config.png 640w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/bbbf7/sdk-config.png 1280w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/ac7a9/sdk-config.png 1920w","/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/5ee19/sdk-config.png 2426w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-extensibility/static/622647e1d1c9c481c79afedf7eb0d3d8/bbbf7/sdk-config.png",alt:"Local server configuration",title:"Local server configuration",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,s.mdx)("ol",null,(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Select ",(0,s.mdx)("strong",{parentName:"p"},"Yes")," from the ",(0,s.mdx)("strong",{parentName:"p"},"Enable Admin UI SDK")," menu.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Select ",(0,s.mdx)("strong",{parentName:"p"},"Yes")," from the ",(0,s.mdx)("strong",{parentName:"p"},"Enable Local Testing")," menu.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Set the ",(0,s.mdx)("strong",{parentName:"p"},"Local Server Base URL")," that points to your localhost, including the port.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"The ",(0,s.mdx)("strong",{parentName:"p"},"Mock Admin IMS Module")," menu determines whether to send mock or real authentication credentials for the Adobe Identity Management Service (IMS). Ensure this value is set to ",(0,s.mdx)("strong",{parentName:"p"},"Yes")," for early-stage testing. Set the value to ",(0,s.mdx)("strong",{parentName:"p"},"No")," when you are ready to test with real credentials.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Set the ",(0,s.mdx)("strong",{parentName:"p"},"Mock IMS Token"),". In the sample ",(0,s.mdx)("inlineCode",{parentName:"p"},"server.js")," file, this value is set to ",(0,s.mdx)("inlineCode",{parentName:"p"},"dummyToken"),".")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Set the ",(0,s.mdx)("strong",{parentName:"p"},"Mock IMS Org ID"),". In the sample ",(0,s.mdx)("inlineCode",{parentName:"p"},"server.js")," file, this value is set to ",(0,s.mdx)("inlineCode",{parentName:"p"},"imsOrg"),".")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Save your configuration.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Clear the cache."),(0,s.mdx)("pre",{parentName:"li"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"bin/magento cache:flush\n")))),(0,s.mdx)("h2",{id:"clean-the-admin-ui-sdk-cache"},"Clean the Admin UI SDK cache"),(0,s.mdx)("p",null,"The ",(0,s.mdx)("inlineCode",{parentName:"p"},"admin_ui_sdk")," cache type stores Admin customizations.  As you develop these customizations, run the following command to ensure you are seeing the latest changes:"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"bin/magento cache:clean admin_ui_sdk\n")),(0,s.mdx)("h2",{id:"test-with-a-sample-app"},"Test with a sample app"),(0,s.mdx)("p",null,"You can download a sample app from the ",(0,s.mdx)("a",{parentName:"p",href:"https://github.com/magento/app-builder-samples"},"Commerce UI test extension repository")," to gain insight on how the Admin SDK injects menus and pages into the Admin."),(0,s.mdx)("ol",null,(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Run the following command to clone and sync the repository:"),(0,s.mdx)("pre",{parentName:"li"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:magento/app-builder-samples.git\n"))),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Change directories to the cloned repository's root directory.")),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Create a ",(0,s.mdx)("inlineCode",{parentName:"p"},"server.js")," file to define a local server:"),(0,s.mdx)("pre",{parentName:"li"},(0,s.mdx)("code",{parentName:"pre",className:"language-js"},'const http = require(\'https\');\nconst fs = require(\'fs\');\nconst url = require(\'url\');\n\nconst options = {\n key: fs.readFileSync(\'key.pem\'),\n cert: fs.readFileSync(\'cert.pem\')\n };\n \n console.log(\'Server will listen at :  https://localhost \');\n http.createServer(options, function (req, res) {\n   res.writeHead(200, {\n     \'Content-Type\': \'application/json\',\n     \'Access-Control-Allow-Origin\': \'*\',\n     \'Access-Control-Allow-Headers\': \'*\'\n   });\n   let json_response;\n   \n   console.log(url.parse(req.url,true).pathname);\n   if (url.parse(req.url,true).pathname == "/config") {\n     json_response = {\n       baseUrl: "https://localhost.adobe.io:9090/",\n       apiKey: "apiKey",\n       auth: {\n         schema: "Bearer",\n         imsToken: "dummyToken"\n       },\n       imsOrg: "imsOrg",\n       version: 1,\n       service: "commerce",\n       extensionPoint: "backend-ui"\n     }\n   } else {\n     json_response = [{\n       "name": "test-extension",\n       "title": "Test extension",\n       "description": "No",\n       "icon": "no",\n       "publisher": "aQQ6300000008LEGAY",\n       "endpoints": {\n         "commerce/backend-ui/1": {\n           "view": [{\n             "href": "https://localhost:9080/index.html"\n           }]\n         }\n       },\n       "xrInfo": {\n         "supportEmail": "test@adobe.com",\n         "appId": "4a4c7cf8-bd64-4649-b8ed-662cd0d9c918"\n       },\n       "status": "PUBLISHED" }]\n     }\n     //console.log(json_response);\n   res.end( JSON.stringify(json_response) );\n }).listen(9090);\n'))),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Run the local server:"),(0,s.mdx)("pre",{parentName:"li"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"node server.js\n"))),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Make sure you have access to the localhost server configuration by entering the following URL in your browser:"),(0,s.mdx)("p",{parentName:"li"},(0,s.mdx)("inlineCode",{parentName:"p"},"https://localhost:9090/config")),(0,s.mdx)("p",{parentName:"li"},"The browser displays a JSON file similar to the following:"),(0,s.mdx)("pre",{parentName:"li"},(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'{\n "baseUrl":"https://localhost:9090/",\n "apiKey":"apiKey",\n "auth":{\n   "schema":"Bearer",\n   "imsToken":"dummyToken"\n },\n "imsOrg":"imsOrg",\n "version":1,\n "service":"commerce",\n "extensionPoint":"backend-ui"\n }\n'))),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Run your extension locally."),(0,s.mdx)("pre",{parentName:"li"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"aio app run\n"))),(0,s.mdx)("li",{parentName:"ol"},(0,s.mdx)("p",{parentName:"li"},"Check that the ",(0,s.mdx)("strong",{parentName:"p"},"First App on App Builder")," option has been added to the ",(0,s.mdx)("strong",{parentName:"p"},"Marketing")," menu in the Admin and that selecting the option takes you to the ",(0,s.mdx)("strong",{parentName:"p"},"Fetched orders from Adobe Commerce")," page."),(0,s.mdx)("p",{parentName:"li"},(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"91.25000000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/5530d/first-app.webp 320w","/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/0c8fb/first-app.webp 640w","/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/94b1e/first-app.webp 1280w","/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/a0d5a/first-app.webp 1786w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/dd4a7/first-app.png 320w","/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/0f09e/first-app.png 640w","/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/bbbf7/first-app.png 1280w","/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/cd322/first-app.png 1786w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-extensibility/static/f5d01c7f0b02b8c6479eb1c733cff053/bbbf7/first-app.png",alt:"Fetched orders from Adobe Commerce page",title:"Fetched orders from Adobe Commerce page",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,s.mdx)("p",{parentName:"li"},(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"41.5625%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/5530d/fetched-orders.webp 320w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/0c8fb/fetched-orders.webp 640w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/94b1e/fetched-orders.webp 1280w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/0b34d/fetched-orders.webp 1920w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/d5269/fetched-orders.webp 2560w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/ed5f1/fetched-orders.webp 3434w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/dd4a7/fetched-orders.png 320w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/0f09e/fetched-orders.png 640w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/bbbf7/fetched-orders.png 1280w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/ac7a9/fetched-orders.png 1920w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/c7a69/fetched-orders.png 2560w","/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/12095/fetched-orders.png 3434w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-extensibility/static/b6ee710355bab736b00e100776e7f7d7/bbbf7/fetched-orders.png",alt:"First App on App Builder menu",title:"First App on App Builder menu",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-admin-ui-sdk-configuration-md-c0a1c44af749a15a177d.js.map
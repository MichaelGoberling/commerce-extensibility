"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[4424],{10778:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return p}});var a=n(87462),o=n(63366),r=(n(15007),n(64983)),d=n(91515),i=["components"],l={},m={_frontmatter:l},s=d.Z;function p(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.mdx)(s,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"webhook-responses-and-logging"},"Webhook responses and logging"),(0,r.mdx)("p",null,"Currently, Adobe Commerce webhooks only support two responses: ",(0,r.mdx)("inlineCode",{parentName:"p"},"success")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"exception"),". Responses that require additional processing, such as parsing the results of a GET response, are not supported."),(0,r.mdx)("p",null,"Exceptions and notices are logged in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"<installation_directory>/var/log/system.log")," file."),(0,r.mdx)("h2",{id:"responses"},"Responses"),(0,r.mdx)("p",null,"The endpoint is expected to return a ",(0,r.mdx)("inlineCode",{parentName:"p"},"200")," response and a JSON object that indicates the result of the operation. The object can contain the following fields:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Field"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"op")),(0,r.mdx)("td",{parentName:"tr",align:null},"The status of the operation: either ",(0,r.mdx)("inlineCode",{parentName:"td"},"success")," or ",(0,r.mdx)("inlineCode",{parentName:"td"},"exception"),".")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"class")),(0,r.mdx)("td",{parentName:"tr",align:null},"If the ",(0,r.mdx)("inlineCode",{parentName:"td"},"op")," status is ",(0,r.mdx)("inlineCode",{parentName:"td"},"exception"),", optionally specifies the exception class. If ",(0,r.mdx)("inlineCode",{parentName:"td"},"class")," is not set, the ",(0,r.mdx)("inlineCode",{parentName:"td"},"\\Magento\\Framework\\Exception\\LocalizedException")," will be thrown.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"message")),(0,r.mdx)("td",{parentName:"tr",align:null},"If the ",(0,r.mdx)("inlineCode",{parentName:"td"},"op")," status is ",(0,r.mdx)("inlineCode",{parentName:"td"},"exception"),", optionally specifies the exception message. If this field is not explicitly set, then the message defined in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"fallbackErrorMessage")," configuration field will be returned. If ",(0,r.mdx)("inlineCode",{parentName:"td"},"fallbackErrorMessage")," is not set, the system default error message will be shown.")))),(0,r.mdx)("p",null,"The response of a successful request is as follows:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "op": "success"\n}\n')),(0,r.mdx)("p",null,"The process that triggered the original event continues without any changes."),(0,r.mdx)("p",null,"If an error occurs, the response is similar to the following:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "op": "exception",\n  "class": "Path\\\\To\\\\Exception\\\\Class",\n  "message": "The product can not be added to the cart as it is out of the stock"\n}\n')),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"exception")," operation causes Commerce to terminate the process that triggered the original event. The exception is logged in ",(0,r.mdx)("inlineCode",{parentName:"p"},"<installation_directory>/var/log/system.log"),"."),(0,r.mdx)("h2",{id:"logging"},"Logging"),(0,r.mdx)("p",null,"The following table describes webhook logging activity. Each hook can be configured to have its own soft and hard timeout values."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Case"),(0,r.mdx)("th",{parentName:"tr",align:null},"Logging activity"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"A hook was executed within the soft and hard time limits with a 2xx response code."),(0,r.mdx)("td",{parentName:"tr",align:null},"None")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"An optional hook was executed with a response code other than 2xx within the soft and hard time limits."),(0,r.mdx)("td",{parentName:"tr",align:null},"Add error log entry")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"A required hook was executed with a response code other than 2xx within the soft and hard time limits."),(0,r.mdx)("td",{parentName:"tr",align:null},"Add error log entry",(0,r.mdx)("br",null),"Throw an exception")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"An optional hook is aborted due to reaching the hard timeout limit."),(0,r.mdx)("td",{parentName:"tr",align:null},"Add error log entry")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"A required hook is aborted due to reaching the hard timeout limit."),(0,r.mdx)("td",{parentName:"tr",align:null},"Add error log entry",(0,r.mdx)("br",null),"Throw an exception")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"The execution time of hook exceeds the soft timeout limit."),(0,r.mdx)("td",{parentName:"tr",align:null},"Add a notice to the error log")))))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-webhooks-responses-md-ab470efaf2782e148caa.js.map
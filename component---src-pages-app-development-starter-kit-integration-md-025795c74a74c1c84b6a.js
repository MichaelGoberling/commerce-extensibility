"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[1374],{54972:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return g},default:function(){return O}});var a=t(87462),i=t(45987),d=(t(35776),t(3905)),m=t(91515),o=t(2613),r=t(52634),l=t(39332),p=t(31090),s=t(48169),c=t(55744),u=t(69663),x=t(83448),C=t(63155),h=t(51803),N=t(10557),f=t(92461);const E=["components"],g={},b=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",n)},_=b("CodeBlock"),y=b("TabsBlock"),R={_frontmatter:g},M=m.Z;function O(e){let{components:n}=e,t=(0,i.Z)(e,E);return(0,d.mdx)(M,(0,a.Z)({},R,t,{components:n,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"integrate-runtime-actions"},"Integrate runtime actions"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"create"),", ",(0,d.mdx)("inlineCode",{parentName:"p"},"update"),", and ",(0,d.mdx)("inlineCode",{parentName:"p"},"delete")," runtime actions perform one of the following functions:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"#notify-the-external-application"},"Notify the external application")," - Notifies an external back-office application when an ",(0,d.mdx)("inlineCode",{parentName:"li"},"<object>")," is created, updated, or deleted in Adobe Commerce. Actions that react to Adobe Commerce events and notify the external back-office application are located in the ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/<object>/commerce")," folder."),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"#notify-adobe-commerce"},"Notify Commerce")," - Notifies Adobe Commerce when an ",(0,d.mdx)("inlineCode",{parentName:"li"},"<object>")," is created, updated, or deleted in an external back-office application. Actions that react to back-office application events and notify Adobe Commerce are located in the ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/<object>/external")," folder.")),(0,d.mdx)("p",null,(0,d.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1222px"}},"\n      ",(0,d.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"40.3125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,d.mdx)("picture",{parentName:"span"},"\n          ",(0,d.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/5530d/starter-kit.webp 320w","/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/0c8fb/starter-kit.webp 640w","/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/92c1e/starter-kit.webp 1222w"],sizes:"(max-width: 1222px) 100vw, 1222px",type:"image/webp"}),"\n          ",(0,d.mdx)("source",{parentName:"picture",srcSet:["/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/dd4a7/starter-kit.png 320w","/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/0f09e/starter-kit.png 640w","/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/5205e/starter-kit.png 1222w"],sizes:"(max-width: 1222px) 100vw, 1222px",type:"image/png"}),"\n          ",(0,d.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-extensibility/static/48c6ed83e9f023d3b53a6fce68f62474/5205e/starter-kit.png",alt:"starter kit diagram",title:"starter kit diagram",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,d.mdx)("h2",{id:"preprocessing-and-postprocessing"},"Preprocessing and postprocessing"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"Preprocessing data - Any preprocessing needed before calling the Adobe Commerce API can be implemented in the ",(0,d.mdx)("inlineCode",{parentName:"li"},"preProcess")," function in the ",(0,d.mdx)("inlineCode",{parentName:"li"},"pre.js")," file."),(0,d.mdx)("li",{parentName:"ul"},"Postprocess data - Any postprocessing needed after calling the Adobe Commerce API can be implemented in the ",(0,d.mdx)("inlineCode",{parentName:"li"},"postProcess")," function in the ",(0,d.mdx)("inlineCode",{parentName:"li"},"post.js")," file.")),(0,d.mdx)("h2",{id:"notify-the-external-application"},"Notify the external application"),(0,d.mdx)("p",null,"This runtime action is responsible for notifying the external back-office application when an ",(0,d.mdx)("inlineCode",{parentName:"p"},"<object>")," is created, updated, or deleted in Adobe Commerce."),(0,d.mdx)("h3",{id:"incoming-event-payload"},"Incoming event payload"),(0,d.mdx)("p",null,"The incoming event payload specified during ",(0,d.mdx)("a",{parentName:"p",href:"../../events/configure-commerce.md#subscribe-and-register-events"},"event registration")," determines the incoming information."),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"order")," runtime action requires the ",(0,d.mdx)("inlineCode",{parentName:"p"},"created_at")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"updated_at")," fields."),(0,d.mdx)(_,{slots:"heading, code",repeat:"4",languages:"JSON, JSON, JSON, JSON",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"customer"},"customer"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n   "id": 1,\n   "created_at":"2000-12-31 16:52:40",\n   "updated_at":"2000-12-31 16:48:40"\n}\n')),(0,d.mdx)("h4",{id:"customer_group"},"customer_group"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "customer_group_id": 6,\n  "customer_group_code": "Group name code",\n  "tax_class_id": 4,\n  "tax_class_name": "Tax class name",\n  "extension_attributes": {\n    "exclude_website_ids":[]\n  }\n}\n')),(0,d.mdx)("h4",{id:"order"},"order"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "real_order_id": "ORDER_ID",\n  "increment_id": "ORDER_INCREMENTAL_ID",\n  "items": [\n    {\n      "item_id": "ITEM_ID"\n    }\n  ],\n  "created_at": "2000-01-01",\n  "updated_at": "2000-01-01"\n}\n')),(0,d.mdx)("h4",{id:"product"},"product"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n   "created_at":"2023-11-24 16:52:40",\n   "name":"Test product name",\n   "sku":"2_4_7_TestProduct",\n   "updated_at":"2023-11-29 16:48:55"\n}\n')),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"params")," also specify the ",(0,d.mdx)("inlineCode",{parentName:"p"},"event_code")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"event_id"),"."),(0,d.mdx)("h3",{id:"payload-transformation"},"Payload transformation"),(0,d.mdx)("p",null,"If necessary, make any transformation changes necessary for the external back-office application's formatting in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"transformData")," function in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"transformer.js")," file."),(0,d.mdx)("h3",{id:"connect-to-the-back-office-application"},"Connect to the back-office application"),(0,d.mdx)("p",null,"Define the connection information in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sendData")," function in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sender.js")," file.  Include all the authentication and connection information in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sender.js")," file or an extracted file outside ",(0,d.mdx)("inlineCode",{parentName:"p"},"index.js"),"."),(0,d.mdx)("p",null,"Parameters from the environment can be accessed from ",(0,d.mdx)("inlineCode",{parentName:"p"},"params"),". Add the necessary parameters in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"actions/<object>/commerce/actions.config.yaml")," under ",(0,d.mdx)("inlineCode",{parentName:"p"},"created -> inputs"),", ",(0,d.mdx)("inlineCode",{parentName:"p"},"updated -> inputs"),", or ",(0,d.mdx)("inlineCode",{parentName:"p"},"deleted -> inputs")," as follows:"),(0,d.mdx)(_,{slots:"heading, code",repeat:"3",languages:"yaml, yaml, yaml",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"create"},"create"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-yaml"},"created:\n  function: commerce/created/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    HERE_YOUR_PARAM: $HERE_YOUR_PARAM_ENV\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,d.mdx)("h4",{id:"update"},"update"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-yaml"},"updated:\n  function: commerce/updated/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    HERE_YOUR_PARAM: $HERE_YOUR_PARAM_ENV\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,d.mdx)("h4",{id:"delete"},"delete"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-yaml"},"deleted:\n  function: commerce/deleted/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    HERE_YOUR_PARAM: $HERE_YOUR_PARAM_ENV\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,d.mdx)("h2",{id:"notify-adobe-commerce"},"Notify Adobe Commerce"),(0,d.mdx)("p",null,"This runtime action is responsible for notifying Adobe Commerce when an ",(0,d.mdx)("inlineCode",{parentName:"p"},"<object>")," is created, updated, or deleted in the external back-office application."),(0,d.mdx)("h3",{id:"incoming-information"},"Incoming information"),(0,d.mdx)("p",null,"The incoming information depends on the external API. The following sample implementation can be modified to accommodate your specific integration needs:"),(0,d.mdx)("br",null),(0,d.mdx)(y,{orientation:"vertical",slots:"heading, content",repeat:"6",mdxType:"TabsBlock"}),(0,d.mdx)("h4",{id:"customer-1"},(0,d.mdx)("inlineCode",{parentName:"h4"},"customer")),(0,d.mdx)(o.default,{mdxType:"IncomingCustomer"}),(0,d.mdx)("h4",{id:"customer_group-1"},(0,d.mdx)("inlineCode",{parentName:"h4"},"customer_group")),(0,d.mdx)(r.default,{mdxType:"IncomingCustomerGroup"}),(0,d.mdx)("h4",{id:"order-1"},(0,d.mdx)("inlineCode",{parentName:"h4"},"order")),(0,d.mdx)(l.default,{mdxType:"IncomingOrder"}),(0,d.mdx)("h4",{id:"product-1"},(0,d.mdx)("inlineCode",{parentName:"h4"},"product")),(0,d.mdx)(p.default,{mdxType:"IncomingProduct"}),(0,d.mdx)("h4",{id:"shipment"},(0,d.mdx)("inlineCode",{parentName:"h4"},"shipment")),(0,d.mdx)(s.default,{mdxType:"IncomingShipment"}),(0,d.mdx)("h4",{id:"stock"},(0,d.mdx)("inlineCode",{parentName:"h4"},"stock")),(0,d.mdx)(c.default,{mdxType:"IncomingStock"}),(0,d.mdx)("h3",{id:"data-validation"},"Data validation"),(0,d.mdx)("p",null,"The incoming data is validated against a JSON schema defined in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"schema.json")," file."),(0,d.mdx)("br",null),(0,d.mdx)(y,{orientation:"vertical",slots:"heading, content",repeat:"6",mdxType:"TabsBlock"}),(0,d.mdx)("h4",{id:"customer-2"},(0,d.mdx)("inlineCode",{parentName:"h4"},"customer")),(0,d.mdx)(u.default,{mdxType:"DataCustomer"}),(0,d.mdx)("h4",{id:"customer_group-2"},(0,d.mdx)("inlineCode",{parentName:"h4"},"customer_group")),(0,d.mdx)(x.default,{mdxType:"DataCustomerGroup"}),(0,d.mdx)("h4",{id:"order-2"},(0,d.mdx)("inlineCode",{parentName:"h4"},"order")),(0,d.mdx)(C.default,{mdxType:"DataOrder"}),(0,d.mdx)("h4",{id:"product-2"},(0,d.mdx)("inlineCode",{parentName:"h4"},"product")),(0,d.mdx)(h.default,{mdxType:"DataProduct"}),(0,d.mdx)("h4",{id:"shipment-1"},(0,d.mdx)("inlineCode",{parentName:"h4"},"shipment")),(0,d.mdx)(N.default,{mdxType:"DataShipment"}),(0,d.mdx)("h4",{id:"stock-1"},(0,d.mdx)("inlineCode",{parentName:"h4"},"stock")),(0,d.mdx)(f.default,{mdxType:"DataStock"}),(0,d.mdx)("h3",{id:"payload-transformation-1"},"Payload transformation"),(0,d.mdx)("p",null,"If necessary, make any transformation changes necessary for the external back-office application's formatting in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"transformData")," function in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"transformer.js")," file."),(0,d.mdx)("h3",{id:"interact-with-the-adobe-commerce-api"},"Interact with the Adobe Commerce API"),(0,d.mdx)("p",null,"The interaction with the Adobe Commerce API is defined in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sendData")," function in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sender.js")," file. This function delegates to the following methods and locations:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"customer"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"createCustomer")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/customer/commerceCustomerApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"updateCustomer")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/customer/commerceCustomerApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"deleteCustomer")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/customer/commerceCustomerApiClient.js")))),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"customer_group"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"createCustomerGroup")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/customer-group/commerceCustomerGroupApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"updateCustomerGroup")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/customer-group/commerceCustomerGroupApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"deleteCustomerGroup")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/customer-group/commerceCustomerGroupApiClient.js")))),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"order"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"addComment")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/order/commerceOrderApiClient.js")))),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"product"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"createProduct")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/product/commerceProductApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"updateProduct")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/product/commerceProductApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"deleteProduct")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/product/commerceProductApiClient.js")))),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"shipment"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"createShipment")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/order/commerceShipmentApiClient.js")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"updateShipment")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/order/commerceShipmentApiClient.js")))),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"stock"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"updateStock")," - ",(0,d.mdx)("inlineCode",{parentName:"li"},"actions/stock/commerceStockApiClient.js"))))),(0,d.mdx)("p",null,"Parameters from the environment can be accessed from ",(0,d.mdx)("inlineCode",{parentName:"p"},"params"),". Add the necessary parameters in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"actions/<object>/external/actions.config.yaml")," under ",(0,d.mdx)("inlineCode",{parentName:"p"},"created -> inputs"),", ",(0,d.mdx)("inlineCode",{parentName:"p"},"updated -> inputs"),", or ",(0,d.mdx)("inlineCode",{parentName:"p"},"deleted -> inputs")," as follows:"),(0,d.mdx)(_,{slots:"heading, code",repeat:"3",languages:"JSON, JSON, JSON",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"create-1"},"create"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-yaml"},"created:\n  function: created/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    COMMERCE_BASE_URL: $COMMERCE_BASE_URL\n    COMMERCE_CONSUMER_KEY: $COMMERCE_CONSUMER_KEY\n    COMMERCE_CONSUMER_SECRET: $COMMERCE_CONSUMER_SECRET\n    COMMERCE_ACCESS_TOKEN: $COMMERCE_ACCESS_TOKEN\n    COMMERCE_ACCESS_TOKEN_SECRET: $COMMERCE_ACCESS_TOKEN_SECRET\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,d.mdx)("h4",{id:"update-1"},"update"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-yaml"},"updated:\n  function: updated/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    COMMERCE_BASE_URL: $COMMERCE_BASE_URL\n    COMMERCE_CONSUMER_KEY: $COMMERCE_CONSUMER_KEY\n    COMMERCE_CONSUMER_SECRET: $COMMERCE_CONSUMER_SECRET\n    COMMERCE_ACCESS_TOKEN: $COMMERCE_ACCESS_TOKEN\n    COMMERCE_ACCESS_TOKEN_SECRET: $COMMERCE_ACCESS_TOKEN_SECRET\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,d.mdx)("h4",{id:"delete-1"},"delete"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-yaml"},"deleted:\n  function: deleted/index.js\n  web: 'no'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    COMMERCE_BASE_URL: $COMMERCE_BASE_URL\n    COMMERCE_CONSUMER_KEY: $COMMERCE_CONSUMER_KEY\n    COMMERCE_CONSUMER_SECRET: $COMMERCE_CONSUMER_SECRET\n    COMMERCE_ACCESS_TOKEN: $COMMERCE_ACCESS_TOKEN\n    COMMERCE_ACCESS_TOKEN_SECRET: $COMMERCE_ACCESS_TOKEN_SECRET\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,d.mdx)("h2",{id:"expected-responses"},"Expected responses"),(0,d.mdx)("p",null,"If the runtime action works correctly, a ",(0,d.mdx)("inlineCode",{parentName:"p"},"200")," response indicates the event is complete."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-javascript"},"return {\n    statusCode: 200\n}\n")),(0,d.mdx)("p",null,"If the validation fails, the runtime action will respond with a ",(0,d.mdx)("inlineCode",{parentName:"p"},"400")," error, which prevents message processing from being retried by Adobe I/O."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-javascript"},"return {\n    statusCode: 400,\n    error: errors\n}\n")),(0,d.mdx)("p",null,"The runtime action will respond with a ",(0,d.mdx)("inlineCode",{parentName:"p"},"500")," error if there is an issue with the application integration. You can send an array of errors, so the consumer can log the information and trigger the retry mechanism."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-javascript"},"return {\n    statusCode: 500,\n    error: errors\n}\n")),(0,d.mdx)("h2",{id:"stock-runtime-action-best-practices"},(0,d.mdx)("inlineCode",{parentName:"h2"},"stock")," runtime action best practices"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"stock")," synchronization that connects a third-party system and Adobe Commerce uses the Adobe Commerce ",(0,d.mdx)("a",{parentName:"p",href:"https://adobe-commerce.redoc.ly/2.4.6-admin/tag/inventorysource-items/#operation/PostV1InventorySourceitems"},"inventory/source-items")," REST endpoint to process the stock updates. The REST endpoint is included in the Starter Kit as an example implementation and depending on the integration's nonfunctional requirements, we suggest the following best practices:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("p",{parentName:"li"},"Payload size limit enforced by Adobe I/O Runtime - The ",(0,d.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/runtime/docs/guides/using/system_settings/"},"maximum ",(0,d.mdx)("inlineCode",{parentName:"a"},"payload")," size")," in Adobe I/O Runtime is not configurable. If an event carries a payload above the limit, for example, when dealing with a full stock synchronization event, it will cause an error. To prevent this situation, we recommend modifying the third-party system to generate event payloads within the ",(0,d.mdx)("inlineCode",{parentName:"p"},"payload")," limits.")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("p",{parentName:"li"},"Timeouts during the event processing - The ",(0,d.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/runtime/docs/guides/using/system_settings/"},"execution time range")," for a runtime action in Adobe I/O Runtime differs for ",(0,d.mdx)("inlineCode",{parentName:"p"},"blocking")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"non-blocking")," calls, with the limit being higher for ",(0,d.mdx)("inlineCode",{parentName:"p"},"non-blocking")," calls."),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},"You can resolve timeouts in runtime action executions depending on their cause:",(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},"If the timeout is caused by a slow or busy Adobe Commerce REST API call, try using the ",(0,d.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/commerce/webapi/rest/use-rest/asynchronous-web-endpoints/"},"asynchronous web endpoints"),". This approach will cause the Commerce API to respond quickly because the data is processing asynchronously."),(0,d.mdx)("li",{parentName:"ul"},"If the timeout is caused by a long-running runtime action, for example, an action that interacts with multiple APIs sequentially and the total processing time exceeds the limits, we recommend using the ",(0,d.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/app-builder/docs/resources/journaling-events/"},"journaling approach")," for consuming events.")))))))}O.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-app-development-starter-kit-integration-md-025795c74a74c1c84b6a.js.map